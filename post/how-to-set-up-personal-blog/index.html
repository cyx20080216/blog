<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客 - cyx20080216的小屋</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="cyx20080216"><meta name=description content="哪个男孩不渴望一个拥有一个个人博客呢 本文将会一步一步地介绍个人博客的搭建的全过程（也是我的个人博客的搭建过程） 注：如果有不明白的地方，可以看">
<meta name=generator content="Hugo 0.89.4 with theme even">
<link rel=canonical href=https://cyx20080216.github.io/blog/post/how-to-set-up-personal-blog/>
<link rel=apple-touch-icon sizes=180x180 href=/blog/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png>
<link rel=manifest href=/blog/manifest.json>
<link rel=mask-icon href=/blog/safari-pinned-tab.svg color=#5bbad5>
<link href=/blog/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous>
<meta property="og:title" content="如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客">
<meta property="og:description" content="哪个男孩不渴望一个拥有一个个人博客呢 本文将会一步一步地介绍个人博客的搭建的全过程（也是我的个人博客的搭建过程） 注：如果有不明白的地方，可以看">
<meta property="og:type" content="article">
<meta property="og:url" content="https://cyx20080216.github.io/blog/post/how-to-set-up-personal-blog/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-12-03T12:55:30+08:00">
<meta property="article:modified_time" content="2021-12-04T10:55:00+08:00">
<meta itemprop=name content="如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客">
<meta itemprop=description content="哪个男孩不渴望一个拥有一个个人博客呢 本文将会一步一步地介绍个人博客的搭建的全过程（也是我的个人博客的搭建过程） 注：如果有不明白的地方，可以看"><meta itemprop=datePublished content="2021-12-03T12:55:30+08:00">
<meta itemprop=dateModified content="2021-12-04T10:55:00+08:00">
<meta itemprop=wordCount content="3100">
<meta itemprop=keywords content="Hugo,Github,网站搭建,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客">
<meta name=twitter:description content="哪个男孩不渴望一个拥有一个个人博客呢 本文将会一步一步地介绍个人博客的搭建的全过程（也是我的个人博客的搭建过程） 注：如果有不明白的地方，可以看"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/blog/ class=logo>cyx20080216的小屋</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/blog/>
<li class=mobile-menu-item>首页</li>
</a><a href=/blog/post/>
<li class=mobile-menu-item>历史</li>
</a><a href=/blog/tags/>
<li class=mobile-menu-item>标签</li>
</a><a href=/blog/categories/>
<li class=mobile-menu-item>分类</li>
</a><a href=/blog/abaut/>
<li class=mobile-menu-item>关于</li>
</a><a href=/blog/search/>
<li class=mobile-menu-item>🔍</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/blog/ class=logo>cyx20080216的小屋</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/blog/>首页</a>
</li><li class=menu-item>
<a class=menu-item-link href=/blog/post/>历史</a>
</li><li class=menu-item>
<a class=menu-item-link href=/blog/tags/>标签</a>
</li><li class=menu-item>
<a class=menu-item-link href=/blog/categories/>分类</a>
</li><li class=menu-item>
<a class=menu-item-link href=/blog/abaut/>关于</a>
</li><li class=menu-item>
<a class=menu-item-link href=/blog/search/>🔍</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<header class=post-header>
<h1 class=post-title>如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客</h1>
<div class=post-meta>
<span class=post-time> 2021-12-03 </span>
<div class=post-category>
<a href=/blog/categories/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/> 网站搭建 </a>
</div>
<span class=more-meta> 约 3100 字 </span>
<span class=more-meta> 预计阅读 7 分钟 </span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>文章目录</h2>
<div class="post-toc-content always-active">
<nav id=TableOfContents>
<ul>
<li><a href=#hugo>Hugo</a>
<ul>
<li>
<ul>
<li><a href=#安装>安装</a></li>
<li><a href=#使用>使用</a></li>
<li><a href=#发布>发布</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#部署在github-pages上>部署在Github Pages上</a>
<ul>
<li>
<ul>
<li><a href=#创建一个用于存放个人博客的仓库>创建一个用于存放个人博客的仓库</a></li>
<li><a href=#将个人博客推送至上一步创建的仓库>将个人博客推送至上一步创建的仓库</a></li>
<li><a href=#配置github-pages>配置Github Pages</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#使用fuse添加搜索功能>使用Fuse添加搜索功能</a></li>
<li><a href=#使用gitalk添加评论功能>使用Gitalk添加评论功能</a></li>
<li><a href=#利用github-actions进行自动化部署与在线编辑>利用Github Actions进行自动化部署与在线编辑</a>
<ul>
<li>
<ul>
<li><a href=#这有什么用>这有什么用？</a></li>
<li><a href=#步骤>步骤</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#大功告成>大功告成</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<p><del>哪个男孩不渴望一个拥有一个个人博客呢</del></p>
<p>本文将会一步一步地介绍个人博客的搭建的全过程（也是<a href=https://cyx20080216.github.io/blog/>我的个人博客</a>的搭建过程）</p>
<p>注：如果有不明白的地方，可以看<a href=https://github.com/cyx20080216/blog>我的个人博客的Github仓库</a></p>
<h1 id=hugo>Hugo</h1>
<p>Hugo是一个静态网站生成器。当然，它也可以生成我们要搭建的个人博客。</p>
<h3 id=安装>安装</h3>
<p>这一步十分简单，只需要前往<a href=https://github.com/gohugoio/hugo/releases/>Hugo在Github上的Release页面</a>，下载对应的版本并解压到合适的位置就行了。</p>
<p>你也可以下载Deb包，再通过<code>dpkg -i &lt;.deb文件名></code>安装</p>
<p>如非必需，建议下载extended版本，因为在之后可能会用到</p>
<h3 id=使用>使用</h3>
<p>首先，选定一个目录来存放你的博客，你需要作如下事情：</p>
<ul>
<li>在该目录下创建<code>config.toml</code>文件，用于存储配置信息（为TOML格式）</li>
<li>在该目录下创建<code>themes</code>文件夹，用于存储主题</li>
<li>在该目录下创建<code>content</code>文件夹，用于存储文章</li>
</ul>
<p>你需要找一个Hugo主题，并把它放在<code>themes</code>文件夹下（我使用了<a href=https://github.com/olOwOlo/hugo-theme-even>hugo-theme-even</a>）</p>
<p>依照你所使用的主题的文档或示例，编写<code>config.toml</code>和在<code>content</code>文件夹下添加文章（有时可能还要编辑<code>themes/主题名/config.toml</code>，如<a href=https://github.com/syui/hugo-theme-air>hugo-theme-air</a>）</p>
<p><a href=https://github.com/cyx20080216/blog/blob/master/config.toml>我的config.toml</a></p>
<p>一切就绪后，你可以在目录下运行<code>hugo server</code>来让Hugo构建网站，并可以通过<a href=http://localhost:1313></a>访问</p>
<p>注1：要构建设置了<code>draft: true</code>的草稿文章，请使用<code>hugo server --draft</code></p>
<p>注2：命令中的<code>hugo</code>视可执行文件位置而定，除非你使用Deb包，下文也依旧如此</p>
<h3 id=发布>发布</h3>
<p>测试完成后，你可以使用<code>hugo</code>来发布。此时构建结果会输出到<code>public</code>文件夹</p>
<p>然后，你可以利用Web服务器和浏览器，来访问它们。</p>
<p>注：如果你真的要就这样把它发布出去，你必须在<code>config.toml</code>中加入<code>baseURL</code>参数，值为今后访问它时使用的URL，如<code>https://cyx20080216.github.io/blog/</code></p>
<h1 id=部署在github-pages上>部署在Github Pages上</h1>
<p>在此之前，你需要</p>
<ul>
<li>一个Github帐号</li>
<li>安装Git</li>
<li>知晓Git与Github的基本使用方法</li>
</ul>
<p>以上不属于本文的主要内容，不再赘述</p>
<h3 id=创建一个用于存放个人博客的仓库>创建一个用于存放个人博客的仓库</h3>
<p>建议仓库名为<code>&lt;用户名>.github.io</code></p>
<p>其余略</p>
<h3 id=将个人博客推送至上一步创建的仓库>将个人博客推送至上一步创建的仓库</h3>
<ol>
<li>进行前文所述的发布操作</li>
<li>进入<code>public/</code>目录</li>
<li>执行<code>git init</code></li>
<li>执行<code>git remote add origin &lt;创建的仓库的地址，如https://github.com/cyx20080216/blog.git></code></li>
<li>执行<code>git add -A</code></li>
<li>执行<code>git commit -m "&lt;提交描述>"</code></li>
<li>执行<code>git push</code>（此步骤可能要求你填写帐号和私人访问密钥）</li>
</ol>
<p>其中3,4仅第一次推送时需执行</p>
<p>每一次博客内容的改变，都需要执行以上操作</p>
<h3 id=配置github-pages>配置Github Pages</h3>
<p>前往<code>https://github.com/&lt;Github用户名>/&lt;创建的仓库名>/settings/pages</code></p>
<p>设置Source部分的分支（此时应该只有一个，选择即可）和目录，点击Save</p>
<p>此时，你的博客访问地址将会在上方显示（用这个来配置之前说的<code>baseURL</code>）</p>
<p>至此，你的个人博客已基本完成。如果你满足于此，就可以关闭这个页面了，否则，请继续往下看</p>
<h1 id=使用fuse添加搜索功能>使用Fuse添加搜索功能</h1>
<p>你可以使用Fuse在前端中实现搜索</p>
<p>但是，直接使用Fuse是非常繁琐的。所以，我找到了一个支持Fuse的Hugo主题：<a href=https://github.com/kaushalmodi/hugo-search-fuse-js>hugo-search-fuse-js</a></p>
<p>注：严格来说，它并不是一个独立的主题，而是可以将Fuse功能加入到已有的主题中</p>
<p>使用步骤：</p>
<ol>
<li>将<a href=https://github.com/kaushalmodi/hugo-search-fuse-js>hugo-search-fuse-js</a>放在themes目录下（就像之前加入自己选择的主题一样）</li>
<li>将<code>config.toml</code>中的<code>theme = "&lt;你的主题名>"</code>改为<code>theme = ["hugo-search-fuse-js", "&lt;你的主题名>"]</code></li>
<li>创建<code>content/search.md</code>文件作为搜索页面，内容之后再说</li>
<li>依照<a href=https://github.com/kaushalmodi/hugo-search-fuse-js>hugo-search-fuse-js</a>项目的说明对主题或<a href=https://github.com/kaushalmodi/hugo-search-fuse-js>hugo-search-fuse-js</a>进行相应的更改（如，我需要在<code>themes/hugo-theme-even/layouts/_default/baseof.html</code>中加入<code>main</code>和<code>footer</code>块）</li>
</ol>
<p><a href=https://github.com/cyx20080216/blog/blob/master/content/search.md>我的content/search.md</a>：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-md data-lang=md>---
title: &#34;????&#34;               <span class=ni>#设置标题</span>
layout: &#34;search&#34;          <span class=ni>#此行为必须</span>
outputs: [&#34;html&#34;, &#34;json&#34;] <span class=ni>#此行为必须</span>
menu: &#34;main&#34;              <span class=ni>#添加到主菜单</span>
weight: 60                <span class=ni>#设置权重</span>，决定了在主菜单中显示的顺序（权重越低越靠前）
---
</code></pre></td></tr></table>
</div>
</div><p><a href=https://github.com/cyx20080216/blog/blob/master/themes/hugo-theme-even/layouts/_default/baseof.html>我的themes/hugo-theme-even/layouts/_default/baseof.html</a>：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-html data-lang=html>{{ if ne .Site.Params.version &#34;4.x&#34; -}}
  {{ errorf &#34;\n\nThere are two possible situations that led to this error:\n  1. You haven&#39;t copied the config.toml yet. See https://github.com/olOwOlo/hugo-theme-even#installation \n  2. You have an incompatible update. See https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 \n\n有两种可能的情况会导致这个错误发生:\n  1. 你还没有复制 config.toml 参考 https://github.com/olOwOlo/hugo-theme-even/blob/master/README-zh.md#installation \n  2. 你进行了一次不兼容的更新 参考 https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 \n&#34; -}}
{{ end -}}
<span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;{{ .Site.Language }}&#34;</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;X-UA-Compatible&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;IE=edge,chrome=1&#34;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>
    {{- block &#34;title&#34; . -}}
      {{ if .IsPage }}{{ .Title }} - {{ .Site.Title }}{{ else }}{{ .Site.Title }}{{ end }}
    {{- end -}}
  <span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
  {{ partial &#34;head.html&#34; . }}
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  {{ partial &#34;slideout.html&#34; . }}
  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;mobile-panel&#34;</span><span class=p>&gt;</span>
    {{ if not .Params.hideHeaderAndFooter -}}
    <span class=p>&lt;</span><span class=nt>header</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;header&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;header&#34;</span><span class=p>&gt;</span>
        {{ partial &#34;header.html&#34; . }}
    <span class=p>&lt;/</span><span class=nt>header</span><span class=p>&gt;</span>
    {{- end }}
    
    {{ block &#34;main&#34; . }}                      <span class=c>&lt;!--此行由我添加--&gt;</span>
    <span class=p>&lt;</span><span class=nt>main</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;main&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;main&#34;</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;content-wrapper&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;content&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;content&#34;</span><span class=p>&gt;</span>
          {{ block &#34;content&#34; . }}{{ end }}
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        {{ partial &#34;comments.html&#34; . }}
      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>main</span><span class=p>&gt;</span>
    {{ end }}                                 <span class=c>&lt;!--此行由我添加--&gt;</span>

    {{ if not .Params.hideHeaderAndFooter -}}
    {{ block &#34;footer&#34; . }}                    <span class=c>&lt;!--此行由我添加--&gt;</span>
    <span class=p>&lt;</span><span class=nt>footer</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;footer&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;footer&#34;</span><span class=p>&gt;</span>
      {{ partial &#34;footer.html&#34; . }}
    <span class=p>&lt;/</span><span class=nt>footer</span><span class=p>&gt;</span>
    {{ end }}                                 <span class=c>&lt;!--此行由我添加--&gt;</span>
    {{- end }}

    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;back-to-top&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;back-to-top&#34;</span><span class=p>&gt;</span>
      <span class=p>&lt;</span><span class=nt>i</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;iconfont icon-up&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>i</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
  {{ partial &#34;scripts.html&#34; . }}
<span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>至此，你可以通过访问<code>&lt;你的baseURL>/search/</code>来进行搜索</p>
<h1 id=使用gitalk添加评论功能>使用Gitalk添加评论功能</h1>
<p>Gitalk的添加方法比较多，需视情况而定</p>
<p>大部分情况下，你需要进行如下操作：</p>
<ol>
<li>申请Github OAuth Apps.<code>Homepage URL</code>和<code>Authorization callback URL</code><strong>必须使用<code>baseURL</code></strong></li>
<li>在页面模板的合适位置添加如下内容</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;gitalk-container&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css&#34;</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
  <span class=kr>const</span> <span class=nx>gitalk</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Gitalk</span><span class=p>({</span>
    <span class=nx>clientID</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.Gitalk.clientID }}&#39;</span><span class=p>,</span>
    <span class=nx>clientSecret</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.Gitalk.clientSecret }}&#39;</span><span class=p>,</span>
    <span class=nx>repo</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.Gitalk.repo }}&#39;</span><span class=p>,</span>
    <span class=nx>owner</span><span class=o>:</span> <span class=s1>&#39;{{ .Site.Params.Gitalk.owner }}&#39;</span><span class=p>,</span>
    <span class=nx>admin</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;{{ .Site.Params.Gitalk.admin }}&#39;</span><span class=p>],</span>
    <span class=nx>id</span><span class=o>:</span> <span class=nx>location</span><span class=p>.</span><span class=nx>pathname</span><span class=p>,</span> <span class=c1>//路径长度必须在50字符以内，否则建议使用MD5哈希值
</span><span class=c1></span>  <span class=p>});</span>
  <span class=nx>gitalk</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=s1>&#39;gitalk-container&#39;</span><span class=p>);</span>
<span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></td></tr></table>
</div>
</div><ol start=3>
<li>在config.toml中添加如下内容</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>Params</span><span class=p>.</span><span class=nx>Gitalk</span><span class=p>]</span>
    <span class=nx>clientID</span> <span class=p>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c># Your client ID</span>
    <span class=nx>clientSecret</span> <span class=p>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c># Your client secret</span>
    <span class=nx>repo</span> <span class=p>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c># The repo to store comments</span>
    <span class=nx>owner</span> <span class=p>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c># Your GitHub ID</span>
    <span class=nx>admin</span><span class=p>=</span> <span class=s2>&#34;xxx&#34;</span> <span class=c># Required. Github repository owner and collaborators. (Users who having write access to this repository)</span>
</code></pre></td></tr></table>
</div>
</div><p>当然，如果你像我一样幸运，使用的主题对Gitalk提供了支持，那么仅需根据文档或示例修改<code>config.toml</code>即可</p>
<h1 id=利用github-actions进行自动化部署与在线编辑>利用Github Actions进行自动化部署与在线编辑</h1>
<h3 id=这有什么用>这有什么用？</h3>
<p>这当然是有用的。例如：</p>
<ol>
<li>你不再需要用自己的电脑Build再Push</li>
<li>使得编辑文章变得简单，甚至可以直接在Github的提供的网页接口上编辑</li>
</ol>
<h3 id=步骤>步骤</h3>
<ol>
<li>在Github仓库的Settings/Secrets中添加<code>PERSONAL_TOKEN</code>，值为你的私人访问秘钥</li>
<li>创建<code>.github/workflows/deploy-gh-pags.yml</code>，内容如下：</li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitHub Pages</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>master</span><span class=w>
</span><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=w>    </span><span class=nt>concurrency</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.workflow }}-${{ github.ref }}</span><span class=w>
</span><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span><span class=w>
</span><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.ref == &#39;refs/heads/master&#39; }}</span><span class=w>
</span><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=nt>personal_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.PERSONAL_TOKEN }}</span><span class=w>
</span><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><ol start=4>
<li>删除所有Hugo自动生成的文件（包括public文件夹）</li>
<li>执行<code>git init</code></li>
<li>执行<code>git remote add origin &lt;仓库地址></code></li>
<li>执行<code>git add -A</code></li>
<li>执行<code>git commit -m "&lt;提交描述>"</code></li>
<li>执行<code>git push</code></li>
</ol>
<p>注：必须确保刚刚添加的文件处于<code>master</code>分支，否则请自行修改<code>.github/workflows/deploy-gh-pags.yml</code></p>
<h1 id=大功告成>大功告成</h1>
<p>现在，你有了一个如标题所说的个人博客。每当仓库里的内容改变，Github Actions会自动帮你构建并部署。还可以随心所欲地搜索、评论。</p>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>文章作者</span>
<span class=item-content>cyx20080216</span>
</p>
<p class=copyright-item>
<span class=item-title>上次更新</span>
<span class=item-content>
2021-12-04
</span>
</p>
<p class=copyright-item>
<span class=item-title>原始文档</span>
<span class=item-content><a class=link-to-markdown href=https://cyx20080216.github.io/blog/post/how-to-set-up-personal-blog/index.md target=_blank>查看本文 Markdown 版本 »</a></span>
</p>
<p class=copyright-item>
<span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank>署名-非商业性使用-相同方式共享 4.0 国际</a></span>
</p>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=/blog/tags/hugo/>Hugo</a>
<a href=/blog/tags/github/>Github</a>
<a href=/blog/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/>网站搭建</a>
</div>
<nav class=post-nav>
<a class=next href=/blog/post/solution-p2013/>
<span class="next-text nav-default">题解 P2013 无线电测向</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i>
</a>
</nav>
</footer>
</article>
</div>
<div id=gitalk-container></div>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css crossorigin=anonymous>
<script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js crossorigin=anonymous></script>
<script type=text/javascript>var gitalk=new Gitalk({id:'2021-12-03 12:55:30 \u002b0800 \u002b0800',title:'如何利用Hugo,Fuse,Gitalk,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客',clientID:'5a61f349c8a77f994fdd',clientSecret:'01100fcf083b6443124dfe14025e70c648142b1d',repo:'blog',owner:'cyx20080216',admin:['cyx20080216'],body:decodeURI(location.href)});gitalk.render('gitalk-container')</script>
<noscript>Please enable JavaScript to view the <a href=https://github.com/gitalk/gitalk>comments powered by gitalk.</a></noscript>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=mailto:cyx20080216@outlook.com class="iconfont icon-email" title=email></a>
<a href=https://github.com/cyx20080216 class="iconfont icon-github" title=github></a>
<a href=https://cyx20080216.github.io/blog/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动
</span>
<span class=division>|</span>
<span class=theme-info>
主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<span class=copyright-year>
&copy;
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>cyx20080216</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/blog/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script>
<script type=text/javascript>window.MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script>
<script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin=anonymous></script>
</body>
</html>